---
import type { Props as SourceProps } from './source.astro';
import Source from './source.astro';
export interface Props {
  sources?: SourceProps[];
  src: string;
  alt: string;
  trw: number;
  picClass?: string;
  imgClass?: string;
  loading?: 'lazy' | 'eager' | null | undefined;
  fetchpriority?: 'auto' | 'high' | 'low' | null | undefined;
}

const {
  sources,
  src,
  alt,
  trw,
  picClass,
  imgClass,
  loading = 'lazy',
  fetchpriority = 'auto',
} = Astro.props;
---

<picture class={picClass}>
  {
    sources?.map((source) => (
      <Source media={source.media} trw={source.trw} src={src} />
    ))
  }
  <img
    class={imgClass}
    src={`https://ik.imagekit.io/juansereina/tr:w-${trw}/web/${src}`}
    alt={alt}
    loading={loading}
    fetchpriority={fetchpriority}
  />
</picture>
