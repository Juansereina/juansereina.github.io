---
import { formatDate } from '../../utils/date';
import type { Props as SourceProps } from './source.astro';
import Source from './source.astro';
export interface Props {
  title: string;
  href: string;
  src: string;
  sources: SourceProps[];
  alt: string;
  readingTime: number;
  publishedAt: Date;
  classes?: string;
}

const { href, title, src, alt, publishedAt, readingTime, classes, sources } =
  Astro.props;
---

<li class={`flex-1 text-gray-400 group ${classes}`}>
  <a href={href} class="w-full text-sm sm:text-base">
    <picture class="mb-2">
      {
        sources.map((source) => (
          <Source media={source.media} trw={source.trw} src={src} />
        ))
      }
      <img
        class="w-full border border-gray-700"
        src={`https://ik.imagekit.io/juansereina/tr:w-650/web/${src}`}
        alt={alt}
        loading="lazy"
      />
    </picture>

    <time class="capitalize" datetime={publishedAt.toISOString()}
      >{formatDate(publishedAt)}</time
    >
    <span>â€” {readingTime} mins de lectura</span>
    <h3 class="mt-2 group-hover:underline decoration-cyan-300">
      {title}
    </h3>
  </a>
</li>
