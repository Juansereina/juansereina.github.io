---
import { getCollection } from 'astro:content';
import { readingTime } from '../../utils';
import Layout from '../../layouts/general.astro';
import Card from '../../components/card-blog.astro';

const blogs = await getCollection('blog', (item) => !item.data.draft);

const meta = {
  title: 'Blog - Juan Sebastián Reina 👨‍💻',
  description: 'Acá comparto y documento esos momentos de extenso aprendizaje',
  keywords: 'Web development, Coding, Life Style, Business',
};
---

<Layout meta={meta}>
  <h1 class="mb-4 leading-tight">Blog</h1>
  <ul>
    {
      blogs.map(({ data, slug, body }) => {
        return (
          <Card
            title={data.title}
            alt={data.image.alt}
            src={data.image.src}
            sources={[
              { media: '(max-width: 400px)', trw: 600 },
              { media: '(min-width: 401px)', trw: 800 },
            ]}
            href={`/blog/${slug}`}
            publishedAt={data.publishedAt}
            readingTime={readingTime(body)}
            classes="mb-8"
          />
        );
      })
    }
  </ul>
</Layout>
